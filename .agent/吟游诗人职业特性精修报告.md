# 吟游诗人职业特性精修完成报告

## 更新日期
2026-01-30

## 更新内容总览

已根据D&D 2024 PHB规则完整更新吟游诗人职业的所有特性描述和职业表格数据。

---

## 一、职业特性描述更新

### 1级特性

#### 施法 (Spellcasting) ✅
**更新要点：**
- 明确了戏法、法术位、准备法术三个核心概念
- 添加了英文名称对照（Cantrips, Spell Slots, Prepared Spells等）
- 推荐法术更新为：
  - **戏法**：舞光术 Dancing Light、恶言相加 Vicious Mockery
  - **1环法术**：魅惑类人 Charm Person、七彩喷射 Color Spray、不谐低语 Dissonant Whispers、治愈真言 Healing Word
- 明确了戏法数量增长：1级2个，4级和10级各增加1个
- 强调了"始终准备的法术"不计入准备法术数量

#### 吟游诗人激励 (Bardic Inspiration) ✅
**更新要点：**
- 明确骰子初始值为D6
- 详细说明使用机制：失败后使用，可将失败变为成功
- 使用次数：魅力调整值（最少1次）
- 明确骰子升级时间：5级D8，10级D10，15级D12

### 2级特性

#### 专精 (Expertise) ✅
**更新要点：**
- 简化描述，引用术语汇编
- 推荐：表演和游说
- **重要**：明确9级再获得2项专精

#### 万事通 (Jack of All Trades) ✅
**更新要点：**
- 更准确的触发条件描述
-适用于"可以使用技能熟练但不具备"的检定
- 加值为熟练加值的一半（向下取整）

### 3级特性

#### 吟游诗人子职 (Bard Subclass) ✅
**更新要点：**
- 更新子职名称：舞蹈学院、**魅心学院**（原"迷惑学院"）、逸闻学院、勇气学院
- 添加了子职的详细说明和"学院"背景信息

### 4级特性

#### 属性值提升 ✅
- 保持原有描述

### 5级特性

#### 激励之源 (Font of Inspiration) ✅
**更新要点：**
- 移除"诗人骰提升为D8"（这在classTable中体现）
- 短休即可恢复诗人激励使用次数
- 可消耗法术位立即恢复1次使用

### 7级特性

#### 反迷惑 (Countercharm) ✅  
**更新要点：**
- 用词调整："干扰"代替"破坏"
- 明确是"令其重骰"，增强描述准确性

### 10级特性

#### 魔法奥秘 (Magical Secrets) ✅
**更新要点：**
- 移除"诗人骰提升为D10"
- 可从**四个职业**法术列表选择：吟游诗人、牧师、德鲁伊、法师
- 适用于每次准备法术数量增加的等级
- 替换法术时也可从这四个列表选择

### 18级特性

#### 先发激励 (Superior Inspiration) ✅
**更新要点：**
- 用词统一："已消耗"代替"被消耗"

### 19级特性

#### 传奇恩惠 ✅
**更新要点：**
- 添加章节引用（见第五章）

### 20级特性

#### 创生圣言 (Words of Creation) ✅
**更新要点：**
- 添加英文名称对照：Power Word Heal、Power Word Kill
- 明确总是准备这两道法术
- 特殊效果：可选择第二个目标（距第一个目标10尺内）

---

## 二、职业表格 (classTable) 更新

### 新增列
✅ **戏法列** - 显示每级可用的戏法数量

### 表格数据修正

#### 准备法术数量修正
原表格"准备法术"列显示的是"可准备的1环及以上法术数"，已根据PHB'24规则更正：

| 等级 | 原值 | 新值 | 说明 |
|------|------|------|------|
| 1级  | 2    | 4    | 初始4个法术 |
| 2级  | 2    | 5    | 增加1个 |
| 3级  | 2    | 6    | 增加1个 |
| 4级  | 3    | 7    | 增加1个 |
| 5级  | 3    | 9    | 增加2个 |
| 6级  | 3    | 10   | 增加1个 |
| 7级  | 3    | 11   | 增加1个 |
| 8级  | 3    | 12   | 增加1个 |
| 9级  | 3    | 14   | 增加2个 |
| 10级 | 4    | 15   | 增加1个（魔法奥秘） |
| 11级 | 4    | 16   | 增加1个 |
| 12-14级 | 4 | 16-17 | 小幅增长 |
| 15-20级 | 4 | 18-22 | 逐级增长 |

#### 法术位数量修正
已根据PHB'24标准法术位表更正所有等级的法术位数量。

#### 戏法数量添加
| 等级范围 | 戏法数量 |
|----------|----------|
| 1-3级    | 2个      |
| 4-9级    | 3个      |
| 10-20级  | 4个      |

---

## 三、特殊法术支持

### 20级特性涉及的法术
创生圣言特性引用了两个9环法术：
- **律令医疗** (Power Word Heal)
- **律令死亡** (Power Word Kill)

**需要确认**：这两个法术是否已在法术数据库中，并正确标记为`classes: ["牧师"]`或相应职业。

### 推荐法术检查清单
需要确认以下推荐法术在数据库中的存在：

**戏法（0环）：**
- ✅ 舞光术 (Dancing Lights) - 已确认存在
- ✅ 恶言相加 (Vicious Mockery) - 已确认存在，仅限吟游诗人

**1环法术：**
- 魅惑类人 (Charm Person)
- 七彩喷射 (Color Spray)
- 不谐低语 (Dissonant Whispers)
- 治愈真言 (Healing Word)

---

## 四、系统集成建议

### 法术选择系统
1. **戏法选择**
   - 1级：选择2个吟游诗人戏法
   - 4级：选择第3个戏法
   - 10级：选择第4个戏法
   - 每级可替换1个戏法

2. **准备法术系统**
   - 根据classTable中的"准备法术"列显示可准备数量
   - 必须拥有对应环阶的法术位
   - 10级后魔法奥秘生效，可从四个职业列表选择

3. **魔法奥秘实现**
   - 10级起，在法术选择界面：
     - 默认显示吟游诗人法术
     - 添加"魔法奥秘"筛选器，可选择：牧师、德鲁伊、法师
   - 所选法术视为吟游诗人法术

4. **创生圣言实现**
   - 20级角色自动获得两个"始终准备"的法术
   - 不占用准备法术数量
   - 在法术书中标记为"职业特性授予"

### 专精系统
需要在角色创建/升级流程中添加：
1. **2级**：选择2项技能获得专精
   - 推荐：表演、游说
   - 必须是已熟练的技能
2. **9级**：再选择2项技能获得专精
   - 同样必须是已熟练的技能

### 万事通系统
需要在技能检定计算中添加逻辑：
```typescript
// 伪代码
if (角色等级 >= 2 && 角色职业包含吟游诗人) {
  if (检定使用的技能 && !角色熟练该技能 && !有其他熟练加值) {
    加值 += Math.floor(熟练加值 / 2);
  }
}
```

### 吟游诗人激励系统
需要实现：
1. **使用次数追踪**
   - 初始：魅力调整值（最少1）
   - 5级后：短休恢复
   - 可消耗法术位恢复
2. **骰子类型**
   - 根据等级自动更新：D6 → D8 (5级) → D10 (10级) → D12 (15级)
3. **18级先攻检查**
   - 投掷先攻时，如果使用次数 < 2，恢复到2次

---

## 五、显示优化建议

### 角色卡职业特性页面
1. **职业表格显示**
   - ✅ 已集成ClassFeatureTable组件
   - 显示完整的classTable数据
   - 可收起/展开

2. **特性描述显示**
   - 按等级分组显示
   - 高亮显示推荐选项
   - 法术名称添加链接到法术详情

3. **动态特性**
   - 根据角色等级高亮当前可用特性
   - 标记已选择的专精技能
   - 显示当前诗人激励骰类型

### 属性和技能页面
1. **专精技能标记**
   - 在技能列表中标记专精技能
   - 显示加倍的熟练加值

2. **万事通效果**
   - 在非熟练技能上显示"+X (万事通)"
   - 计算时自动添加

---

## 六、测试检查清单

### 功能测试
- [ ] 1级吟游诗人可以选择2个戏法
- [ ] 1级吟游诗人可以准备4个1环法术
- [ ] 2级获得2项专精选择
- [ ] 4级获得第3个戏法
- [ ] 5级诗人骰自动变为D8
- [ ] 9级获得额外2项专精选择
- [ ] 10级获得第4个戏法
- [ ] 10级可从四个职业列表选择法术
- [ ] 10级诗人骰自动变为D10
- [ ] 15级诗人骰自动变为D12
- [ ] 20级自动获得律令医疗和律令死亡

### 数据测试
- [ ] classTable所有等级数据显示正确
- [ ] 法术位数量与PHB'24一致
- [ ] 准备法术数量正确增长
- [ ] 戏法数量在对应等级正确显示

### UI测试
- [ ] 职业表格正确显示并可收起/展开
- [ ] 特性描述格式正确，无乱码
- [ ] 推荐法术正确显示
- [ ] 专精和万事通效果正确反馈到属性/技能页面

---

## 七、已知问题和待办

### 待验证
1. 法术数据库中是否包含所有推荐法术
2. 律令医疗和律令死亡法术是否已添加
3. 魔法奥秘的UI实现方案

### 待实现  
1. 法术选择系统扩展到职业施法
2. 专精选择界面
3. 万事通自动计算
4. 吟游诗人激励追踪系统
5. 创生圣言的"始终准备"法术支持

---

## 八、兼容性说明

所有更新均向后兼容，现有角色数据不会受到影响。新规则在角色升级或创建新角色时自动应用。

---

## 总结

✅ **已完成**：
- 所有职业特性描述已根据PHB'24更新
- classTable完整且准确
- 戏法列已添加
- 准备法术和法术位数量已修正
- 类型系统支持法术列表引用（spellList字段）

🔄 **进行中**：
- 法术选择系统的UI实现

📋 **待完成**：
- 专精、万事通、吟游诗人激励的完整系统实现
- 魔法奥秘的法术筛选器
- 20级创生圣言的特殊法术支持

---

文档生成时间：2026-01-30 12:45:00
